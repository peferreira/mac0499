%% ------------------------------------------------------------------------- %%
\chapter{Conceitos}
\label{cap:conceitos}

Essa seção explica em mais detalhes as ferramentas e alguns conceitos utilizados nesse trabalho. 
Será tratado o conceito de erosão de uma imagem e a geração de sementes para o algoritmo da IFT por erosão. Por fim, terá uma apresentação do Coeficiente de Dice, utilizado nesse trabalho para verificação da acurácia do método aplicado.


\section{Erosão}
\label{cont:erosao}
\paragraph*{}
A erosão (usualmente representada por $\ominus$) e a dilatação são consideradas as duas operações fundamentais do processamento morfológico de imagens, sendo assim, todas as outras operações são baseadas nelas. 
\paragraph*{}
Em morfologia binária, uma imagem é vista como um sub-conjunto de um espaço Euclideano $\mathbb{R}^{d}$ ou o conjunto de inteiros $\mathbb{Z}^{d}$, para alguma dimensão \emph{d}.
\paragraph*{}
A ideia básica em uma morfologia binária é examinar uma imagem utilizando um objeto simples com formato pré-definido, e decidir se esse objeto se enquadra nos objetos presentes na imagem. Esse objeto de examinação é chamado de elementro estruturante, e é uma imagem também.
\paragraph*{}
Seja \emph{E} um espaço Euclideano ou um gride de inteiros, e \emph{A} uma imagem binária em \emph{E}. 
A \textbf{erosão} de uma imagem binária \emph{A} produzida pelo elemento estruturante \emph{B} é definida por:
\paragraph*{}
\begin{equation}
A \ominus B =  \{ z \in E | B_z \subseteq A \}
\end{equation}
\paragraph*{}
Onde $B_z$ é a translação de \emph{B} dada pelo vetor z, i.e., 
\paragraph*{}
\begin{equation}
B_z = \{b+z | b \in B \}, \forall z \in E
\end{equation}



\textbf{Exemplo:}

\paragraph*{}
Dada a imagem binária  \emph{A} (\ref{fig:A}) a seguir e o elemento estruturante \emph{B} (\ref{fig:A})

\paragraph*{}

\begin{figure}[htb]
\begin{center}
\includegraphics[width=7cm]{figuras/erosao1}
\caption{\label{fig:A} A}
\end{center}
\end{figure}


\begin{figure}[htb]
\begin{center}
\includegraphics[width=3cm]{figuras/estruturante}
\caption{\label{fig:B} B}
\end{center}
\end{figure}

\pagebreak

Aplicando-se o elemento estruturante \emph{B} em cada elemento da imagem \emph{A}, encontraremos elementos que não pertencem a $A \ominus B$, por exemplo o elemento centralizado no meio do elemento estruturante da
imagem (\ref{fig:notFit})
\paragraph*{}


\begin{figure}[!h]

\paragraph*{}

\begin{center}
\includegraphics[width=6cm]{figuras/erosao1-not-fit}
\caption{\label{fig:notFit} }
\end{center}
\end{figure}



Também podem existir elementos que pertencem a $A \ominus B$, por exemplo o elemento centralizado no meio do elemento estruturante, como mostrado na imagem (\ref{fig:fit}).
\begin{figure}[!h]



\begin{center}
\includegraphics[width=6cm]{figuras/erosao1-fit}
\caption{\label{fig:fit} }
\end{center}
\end{figure}



O resultado da operação de erosão, $A \ominus B$, será dado pela imagem (\ref{fig:resultadoErosao}).

\begin{figure}[!h]

\begin{center}
\includegraphics[width=6cm]{figuras/erosao2}
\caption{\label{fig:resultadoErosao} }
\end{center}
\end{figure}

\pagebreak


\paragraph*{}


\section{Gerando as sementes}
\label{cont:sementes}
\subsection{Sementes na IFT}

O algoritmo da IFT é inicializado a partir de sementes do fundo e do objeto. Através dessas sementes o algoritmo busca por regiões da imagem que pertençam ao mesmo objeto que a semente especificada. Por exemplo, se a IFT receber uma semente de fundo em uma iteração, ela vai percorrer os arredores daquela semente se guiando através de regiões semelhantes para clássificá-las como também sendo regiões pertencentes ao fundo da imagem.
\subsection{Sementes por erosão}

Uma forma de gerar as sementes é através da erosão da imagem do gabarito (imagem binária que separa o fundo do objeto).
Aplicando a erosão no gabarito de uma imagem e utilizando raios diferentes para o elemento estruturante gera-se um conjunto de  imagens para serem utilizadas como sementes da IFT. 
Se for realizado um processo de erosão, partindo do raio \emph{0} até o raio máximo de erosão, serão geradas imagens 
distorcidas, gradualmente, sendo a imagem de raio zero uma semente extremamente significativa(gabarito sem erosão), até se tornar uma semente bem pouco significativa quando o raio é máximo.
\\\\
Por exemplo, a partir da imagem a seguir:
\\
\begin{figure}[!h]

\begin{center}
\includegraphics[width=6cm]{figuras/scissors}
\caption{\label{fig:tesoura} scissors, base de dados pública do grabcut}
\end{center}
\end{figure}

\pagebreak

Se for aplicada a erosão no respectivo gabarito, será obtida uma semente diferente para os diversos raios de erosão.
Na imagem seguinte será apresentada uma imagem variando seu raio de erosão de 0 (imagem sem erosão) até 45.  


\begin{figure}[!h]

\begin{center}
\includegraphics[width=8cm]{figuras/erosao_tesoura}
\caption{\label{fig:erosaoTesoura} raio 0 até 45, de 5 em 5.}
\end{center}
\end{figure}

\subsection{Sementes por usuário robô}
\label{cont:robo}
Uma forma possível de gerar sementes é através de iterações de um usuário real. Inicialmente é possível atribuir para a imagem algumas sementes de fundo e outras de objeto, rodar a IFT a partir dessas sementes e verificar a acurácia do resultado obtido. Depois, com a imagem binária obtida, seria possível que o usuário inserisse novas sementes em regiões que a IFT cometeu erros, visando forçar a IFT a tratar aquele elemento da imagem como um objeto de um tipo específico.
\paragraph*{}
Buscando reduzir os custos e os vieses associados com avaliação feita por um usuário real, é possível utilizar usuários robôs, que, dado o gabarito de segmentação da imagem, são capazes de simular usuários reais. A criação de usuários robôs sobre pixels e superpixels também foi utilizada em \citet{} para a realização dos experimentos.
\paragraph*{}
Esses usuários tentam imitar um usuário com conhecimentos avançados em segmentação de imagens. A cada passo, o usuário robô seleciona um novo marcador de correção no maior componente conexo de erro, centralizado no ponto mais distante da borda do componente, gerando uma sequencia de IFTs.
\paragraph*{}
 Um usuário robô garante um padrão nas decisões tomadas, que são baseadas em seu algoritmo, sendo assim os resultados obtidos são mais confiáveis que através do usuário real.

\section{Coeficiente de Dice}
\label{cont:dice}
Esse coeficiente também é conhecido por outros nomes, tais como: Índice de Sorensen ou Coeficiente de Sorensen-Dice. Essa medida é uma estatística usada para comparar a semelhança entre duas amostras. Também é conhecido como F1 score.

A aplicação da formula original era destinada para a verificação de presença ou ausência de uma informação específica.

\paragraph*{}


\[
     CSD = \frac{2 | X \cap Y |}{|X|+|Y|}
\]

Neste trabalho a fórmula de Dice será utilizada para análisar a proximidade entre dois conjuntos X e Y, respectivamente, o conjunto de pixels do objeto segmentado e o conjunto de pixels do gabarito. Onde X será o conjunto de pixels classificado pela IFT em objeto ou fundo. Quanto mais parecidos, segundo a fórmula de Dice, forem X e Y, então, melhores foram os resultados obtidos pela IFT na segmentação da imagem.

\pagebreak


















 



